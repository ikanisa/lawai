# Implementation Status vs. Production Plan

## Executive Summary
The current codebase delivers the foundational scaffolding for the Avocat-AI Francophone platform—database migrations, shared schemas, OpenAI Agents SDK orchestration, authoritative ingestion stubs, and governance documentation. The refreshed production plan introduces additional non-negotiable requirements: France-specific bans on judge analytics, EU AI Act FRIA checkpoints, CEPEJ ethical charter guardrails, enterprise-grade user management (RBAC × ABAC, SSO/SCIM/MFA, consent & audit ledgers), ELI/ECLI + Akoma Ntoso enrichment, Rwanda ingestion, case-reliability scoring transparency, LegalBench/LexGLUE benchmarking, residency-specific privacy controls, and a Go / No-Go Release Checklist that must be satisfied before launch.【F:docs/avocat_ai_bell_system_plan.md†L41-L166】【F:docs/avocat_ai_bell_system_plan.md†L186-L377】【F:ops/reports/GO_NO_GO_CHECKLIST.md†L1-L73】 While many building blocks are now present, substantial scope remains outstanding across authoritative ingestion, compliance guardrails, hybrid retrieval telemetry, HITL workflows, governance automation, agent learning loops, residency enforcement, enterprise identity, and the full mobile-first UI mandated by Appendix A.

### Implemented Capabilities
- **Supabase foundation** – Extensions, tenancy tables, RLS, storage policies, and user-management schema (policies, entitlements, audit, consent, invitations, billing) are committed alongside ops CLIs and CI workflow to provision environments.【F:db/migrations/0001_extensions.sql†L1-L3】【F:db/migrations/0026_user_management.sql†L1-L78】【F:apps/ops/src/provision.ts†L1-L74】【F:.github/workflows/ci.yml†L1-L78】
- **Authoritative ingestion scaffolding** – The `crawl-authorities` edge function enumerates France, Belgium, Luxembourg, Switzerland, Canada/Québec, OHADA, Maghreb, Rwanda, and EU sources, storing metadata, summaries, and chunk embeddings across storage and the OpenAI vector store synchroniser.【F:apps/edge/crawl-authorities/index.ts†L1-L1444】【F:apps/ops/src/vector-store.ts†L1-L192】【F:db/migrations/0033_document_summaries.sql†L1-L23】
- **Provenance telemetry** – Link-health metadata and residency tagging flow into the refreshed ingestion pipeline, with `org_provenance_metrics` surfacing binding-language coverage, residency distributions, and article-anchor counts alongside `/metrics/governance`'s provenance payload for operators.【F:apps/edge/crawl-authorities/index.ts†L1188-L1399】【F:db/migrations/0056_source_link_health.sql†L1-L11】【F:db/migrations/0057_org_provenance_metrics.sql†L1-L61】【F:apps/api/src/server.ts†L250-L309】
- **Identifier coverage dashboards** – The new `jurisdiction_identifier_coverage` view aggregates ELI, ECLI, and Akoma Ntoso adoption per jurisdiction, the governance metrics endpoint now returns identifier coverage payloads, and the admin console renders the coverage table with bilingual labels for operators.【F:db/migrations/0070_identifier_coverage_view.sql†L1-L18】【F:apps/api/src/server.ts†L333-L420】【F:apps/web/src/components/admin/admin-view.tsx†L74-L234】
- **Agents SDK orchestrator** – Hosted Web/File Search, jurisdiction routing, OHADA helpers, deadlines, limitation and interest calculators, citation guardrails, confidential-mode propagation, learning ticket creation, and case-quality scoring persist to Supabase with telemetry.【F:apps/api/src/agent.ts†L80-L1186】【F:apps/api/src/case-quality.ts†L1-L215】【F:db/migrations/0011_agent_learning.sql†L1-L94】
- **Evaluation tooling** – Ops CLI executes seeded prompts against `/runs`, records metrics in `eval_results`, and CI boots the stub API to gate builds.【F:apps/ops/src/evaluate.ts†L1-L220】【F:.github/workflows/ci.yml†L45-L78】【F:db/migrations/0020_eval_metrics.sql†L1-L8】
- **Governance documentation & telemetry** – Responsible AI policies, CEPEJ mapping, FRIA template, Council of Europe alignment, residency matrix, SLO snapshots, regulator dispatch ledger, and transparency report endpoints/CLI are in place.【F:docs/governance/responsible_ai_policy.md†L1-L47】【F:docs/governance/cepej_charter_mapping.md†L1-L36】【F:docs/governance/fria_template.md†L1-L47】【F:db/migrations/0047_slo_snapshots.sql†L1-L11】【F:apps/api/src/server.ts†L960-L1109】
- **Go / No-Go tracking** – New evidence and sign-off tables, API endpoints, and an ops CLI summarise Section A–H readiness and surface missing artefacts before approving releases.【F:db/migrations/0051_go_no_go_tracking.sql†L1-L40】【F:apps/api/src/server.ts†L720-L942】【F:apps/ops/src/go-no-go.ts†L1-L94】
- **FRIA artefact automation** – `fria_artifacts` persists EU AI Act FRIA dossiers, admin APIs expose upload/update flows, the Go / No-Go evidence row auto-updates Section A, and the CLI now blocks `--require-go` when no validated artefact exists for the target release.【F:db/migrations/0052_fria_artifacts.sql†L1-L23】【F:apps/api/src/server.ts†L780-L1043】【F:apps/ops/src/go-no-go.ts†L1-L129】【F:apps/ops/src/lib/go-no-go.ts†L1-L85】
- **Status & planning artefacts** – Supabase/Agent manifest, Go / No-Go checklist, gap logs, risk register, production milestones, and evaluation reports capture programme state for audits.【F:docs/SUPABASE_AND_AGENT_MANIFEST.yaml†L1-L214】【F:ops/reports/GO_NO_GO_CHECKLIST.md†L1-L73】【F:ops/reports/RISK_REGISTER.md†L1-L30】【F:ops/reports/PRODUCTION_MILESTONES.md†L1-L64】

### Outstanding Scope
- **Environment hardening** – Secret rotation hooks (`pnpm ops:rotate-secrets`), residency-aware storage enforcement (`org_residency_allows`), IP allow-list and MFA policy gates, consent/version disclosures, and CI smoke tests for `public.is_org_member` now land with the updated access middleware. Remaining tasks focus on production UI for consent capture and full-device registry telemetry.【F:apps/ops/src/rotate-secrets.ts†L1-L79】【F:db/migrations/0053_storage_residency_enforcement.sql†L1-L63】【F:apps/api/src/access-control.ts†L1-L255】【F:apps/ops/src/rls-smoke.ts†L1-L45】
- **Ingestion provenance** – Automated link-health telemetry and residency tagging now surface through `/metrics/governance`, while Akoma Ntoso/ELI/ECLI enrichment, live Maghreb/Rwanda feeds, and operator-facing dashboards remain outstanding.【F:db/migrations/0057_org_provenance_metrics.sql†L1-L80】【F:docs/avocat_ai_bell_system_plan.md†L62-L140】
- **Compliance guardrails** – EU AI Act FRIA checkpoints, CEPEJ automated tests, Council of Europe treaty disclosures in product, planner/executor separation, deterministic run keys, and auditor-friendly “Why you can trust this” panel still need delivery.【F:docs/avocat_ai_bell_system_plan.md†L186-L260】
- **Learning loop** – The hourly worker now processes indexing/query-rewrite/guardrail tickets, snapshots queue health, and nightly drift/evaluation reports persist to `agent_learning_reports`; fairness drift snapshots and LegalBench/LexGLUE benchmarks are recorded alongside drift metrics. Remaining scope focuses on richer analytics (e.g., deeper fairness drill-downs) and extended operator visualisations beyond the new HITL dashboards.【F:apps/edge/process-learning/index.ts†L1-L438】【F:apps/ops/src/evaluate.ts†L1-L340】
- **Front-end & PWA** – The mandated mobile-first Next.js App Router UI, HITL console, drafting/matters flows, authority browser diffing, bilingual toggles, Maghreb/Rwanda banners, reading modes, navigation, voice/OCR capture, offline outbox, staleness chips, notifications, and C2PA exports remain outstanding.【F:docs/avocat_ai_bell_system_plan.md†L261-L351】
- **Enterprise launch readiness** – Automated transparency distribution, DPIA templates, Council of Europe commitments, SLO dashboards, regulator notification workflows, and marketing collateral activation are incomplete.【F:docs/avocat_ai_bell_system_plan.md†L342-L377】

## Workstream Status Overview

| Workstream | Plan Expectations | Implementation Status |
| --- | --- | --- |
| Foundation & Environment | Supabase schema, storage policies, vector store provisioning, CI/CD, residency zoning, secrets automation, enterprise identity tables.【F:docs/avocat_ai_bell_system_plan.md†L55-L166】 | **Progressing.** Core tables, RLS, storage bucket policies, CI workflow, and the new user-management tables (`org_policies`, `jurisdiction_entitlements`, `audit_events`, `consent_events`, `invitations`, `billing_accounts`) are in place. Residency partitioning, secret rotation, vector store bootstrap automation, RBAC × ABAC middleware, and enforcement of SSO/SCIM/MFA/IP policies remain unimplemented.【F:db/migrations/0001_extensions.sql†L1-L3】【F:db/migrations/0026_user_management.sql†L1-L78】【F:db/migrations/0027_user_management_rls.sql†L1-L24】【F:apps/ops/src/bootstrap.ts†L1-L70】【F:.github/workflows/ci.yml†L1-L27】 |
| Data Ingestion & Provenance | Scheduled crawlers per jurisdiction (including Rwanda), metadata normalization with ELI/ECLI, Akoma Ntoso storage, storage uploads, vector store sync, provenance dashboards.【F:docs/avocat_ai_bell_system_plan.md†L62-L140】 | **Progressing.** The `crawl-authorities` edge function now polls Légifrance, Moniteur/Justel, Legilux, Fedlex, Tribunal fédéral, Justice Laws, CanLII, Supreme Court of Canada, OHADA (Uniform Acts + CCJA), Rwanda gazettes, and fixtures, deduping before mirroring to Supabase Storage and the OpenAI Vector Store. It now generates structured summaries (`document_summaries`), refreshes chunk embeddings in `document_chunks` for every authoritative upload, and feeds governance dashboards with ready/pending/failed/skipped coverage plus chunk counts per organisation.【F:apps/edge/crawl-authorities/index.ts†L1-L1444】【F:db/migrations/0033_document_summaries.sql†L1-L23】【F:apps/api/src/server.ts†L105-L196】 Automated ELI/ECLI/Akoma Ntoso enrichment and residency-aware provenance dashboards remain outstanding.【F:db/migrations/0021_case_quality_schema.sql†L1-L66】 |
| Agent Orchestration & Tools | Agents SDK with web/file search, function tools, guardrails, compliance gates (CEPEJ, EU AI Act FRIA, France analytics ban), Supabase persistence.【F:docs/avocat_ai_bell_system_plan.md†L72-L208】 | **Partial.** Hosted Web/File Search, jurisdictional tools, retries, guardrails, telemetry, and case alignment exist. The France judge-analytics prohibition is now enforced, but FRIA checkpoints, CEPEJ automated tests, Council of Europe treaty disclosures, and planner/executor separation are still outstanding.【F:apps/api/src/agent.ts†L80-L115】【F:apps/api/src/agent.ts†L900-L1150】【F:apps/api/src/agent.ts†L204-284】【F:apps/api/src/case-quality.ts†L1-L159】 |
| Retrieval & Evaluation | Hybrid OpenAI File Search + `match_chunks`, evaluation suites, LegalBench/LexGLUE integration, metrics dashboards.【F:docs/avocat_ai_bell_system_plan.md†L209-L260】 | **Advancing.** The agent blends hosted File Search with local `match_chunks`, applies trust-tier weighting, and the evaluation CLI now loads LegalBench/LexGLUE fixtures while storing benchmark metadata for telemetry. Evaluation coverage feeds `org_evaluation_metrics`/`/metrics/evaluations`, powers the admin dashboard with allowlist, temporal, and Maghreb-banner coverage per jurisdiction, and now fails the build when Supabase provenance shows link-health regressions.【F:apps/api/src/agent.ts†L430-L520】【F:apps/ops/src/evaluate.ts†L1-L680】【F:db/migrations/0071_org_evaluation_metrics.sql†L1-L60】【F:apps/api/src/server.ts†L580-L668】【F:apps/web/src/components/admin/admin-view.tsx†L360-L520】 |
| Front-End & HITL Workflows | Production-grade Next.js App Router UI with liquid-glass theming, analytics compliance banners, jurisdiction chips, Maghreb/Rwanda language banners, IRAC accordion, citation badges, case score explainers, C2PA exports, multi-screen workflows, PWA support, telemetry, WCAG 2.2 AA compliance, and the new mobile-first PWA checklist (reading modes, bottom navigation, voice/OCR capture, confidential mode hardening, Outbox/offline handling).【F:docs/avocat_ai_bell_system_plan.md†L261-L342】 | **Progressing.** The research screen now renders IRAC answers with Maghreb language warnings, Canadian bilingual equality notices, Swiss multilingual reminders, and a dynamic jurisdiction catalogue spanning France, Belgium, Luxembourg, Switzerland, Monaco, Québec/Canada, the Maghreb, and OHADA, alongside telemetry for submissions and citation visits.【F:apps/web/src/components/research/research-view.tsx†L1-L360】【F:apps/web/messages/fr.json†L44-L59】【F:apps/web/src/components/language-banner.tsx†L1-L18】 Remaining M1 UI scope includes the mobile navigation shell, drafting/matters workflows, HITL console actions, accessibility polishing, offline modes, and export integrations. |
| Agent Learning & Continuous Improvement | Reinforced RAG loop, learning tickets, schedulers, drift reports, LegalBench/LexGLUE CI, CEPEJ/Fairness monitoring, acceptance metrics.【F:docs/avocat_ai_bell_system_plan.md†L274-L341】 | **Complete.** Policy version APIs now expose listing/creation/activation flows, reviewers can submit synonym feedback directly from HITL actions, and the hourly worker merges synonym tickets into `agent_synonyms` alongside the existing drift/fairness reports and benchmark logging.【F:apps/api/src/server.ts†L2001-L2267】【F:apps/edge/process-learning/index.ts†L300-L420】 |
| Agent Task Execution & Tooling | Planner/executor/verifier pipeline, task queue, tool registry, Confidential Mode, compliance gateways.【F:docs/avocat_ai_bell_system_plan.md†L312-L377】 | **Partial.** Tools emit telemetry and run queues exist, yet deterministic run keys, FRIA/analytics compliance gates, residency alerts, Confidential Mode enforcement, and queue processors have not been implemented.【F:apps/api/src/agent.ts†L530-L699】【F:db/migrations/0011_agent_learning.sql†L51-L82】 |
| Governance & Compliance | Policies, conflict checks, CEPEJ charter, Council of Europe treaty mapping, FRIA templates, residency matrices, dashboards.【F:docs/avocat_ai_bell_system_plan.md†L342-L377】 | **Advancing.** Responsible-AI, conflict, retention, incident, and change-management docs are joined by the CEPEJ mapping, FRIA template, Council of Europe alignment note, residency matrix, and now automated CEPEJ exports plus transparency reports persisted in `transparency_reports`. The Go / No-Go workflow now records FRIA artefacts and enforces Section A automatically. Remaining gaps focus on regulator-grade SLO dashboards and automated publication workflows.【F:docs/governance/cepej_charter_mapping.md†L1-L36】【F:docs/governance/fria_template.md†L1-L47】【F:docs/governance/coe_ai_alignment.md†L1-L31】【F:docs/governance/data_residency_matrix.md†L1-L21】【F:apps/api/src/server.ts†L780-L1043】【F:db/migrations/0044_transparency_reports.sql†L1-L12】 |
| Launch & Operations | Pilot playbooks, SLOs, transparency reports, FRIA logs, pricing collateral.【F:docs/avocat_ai_bell_system_plan.md†L349-L377】 | **Advancing.** Red-team playbook, pricing collateral, performance snapshots, the SLO snapshot registry (`slo_snapshots`), automated regulator dispatch log (`regulator_dispatches`), and the transparency CLI now persist regulator-ready exports. Outstanding work covers automated distribution to regulators and public-facing SLO dashboards.【F:docs/operations/red_team_playbook.md†L1-L36】【F:docs/launch/pricing_collateral.md†L1-L28】【F:README.md†L108-L134】【F:apps/ops/src/slo-report.ts†L1-L141】【F:apps/api/src/server.ts†L960-L1109】【F:db/migrations/0047_slo_snapshots.sql†L1-L11】【F:db/migrations/0049_regulator_dispatches.sql†L1-L13】 |

## Detailed Gap Analysis & Next Steps

### 1. Foundation & Environment
**What’s in place**: Supabase extensions, tenancy tables, row-level security, storage bucket policies, user-management tables, and migrations for agent telemetry are defined.【F:db/migrations/0001_extensions.sql†L1-L3】【F:db/migrations/0002_auth_orgs.sql†L1-L33】【F:db/migrations/0003_legal_core.sql†L1-L56】【F:db/migrations/0005_rls.sql†L1-L82】【F:db/migrations/0026_user_management.sql†L1-L78】【F:db/migrations/0027_user_management_rls.sql†L1-L24】【F:db/migrations/0007_storage.sql†L1-L67】 Dedicated ops scripts now bootstrap buckets, apply SQL migrations through the Supabase service role, and provision the authoritative vector store; the CI workflow spins up pgvector, runs lint, applies migrations, and executes the test suite to validate infrastructure drift.【F:apps/ops/src/bootstrap.ts†L1-L36】【F:apps/ops/src/migrate.ts†L1-L33】【F:apps/ops/src/provision.ts†L1-L45】【F:apps/ops/src/vector-store.ts†L1-L123】【F:.github/workflows/ci.yml†L1-L40】

**Remaining work**: Harden secrets management (rotation, vault integration), add environment conformance checks, enforce residency-aware storage/vector zoning, and document lawful basis matrices for GDPR, Rwanda Law 058/2021, and the Malabo Convention. Ship RBAC × ABAC middleware, SSO/SCIM connectors, MFA/passkey enforcement, IP allow-lists, consent capture, admin console controls, and Confidential Mode/France-mode enforcement at the agent/tool layer.【F:docs/avocat_ai_bell_system_plan.md†L55-L166】

### 2. Data Ingestion & Provenance
**What’s in place**: The edge function normalizes metadata (jurisdiction, binding language, consolidation), uploads artifacts to storage/Vector Store when credentials are provided, and now generates structured summaries with chunk embeddings for Supabase pgvector (`document_summaries`, `document_chunks`).【F:apps/edge/crawl-authorities/index.ts†L1-L1444】【F:db/migrations/0033_document_summaries.sql†L1-L23】 The operator console surfaces summary status, chunk counts, and highlights per snapshot and lets reviewers trigger a one-click “Refresh summary” action that replays the summarisation pipeline via `/corpus/:documentId/resummarize`.【F:apps/api/src/server.ts†L813-L1000】【F:apps/web/src/components/corpus/corpus-view.tsx†L1-L210】

**Remaining work**: Expand automated ELI/ECLI/Akoma Ntoso enrichment, residency-aware storage prefixes, provenance dashboards, and live citator feeds; broaden Maghreb/Rwanda coverage beyond RSS fallbacks and wire automated link-health alerts.【F:docs/avocat_ai_bell_system_plan.md†L62-L140】【F:db/migrations/0021_case_quality_schema.sql†L1-L100】

### 3. Agent Orchestration & Tools
**What’s in place**: The Agents SDK orchestrator now drives hosted Web/File Search, the full suite of function tools (routing, code lookup, OHADA helper, deadline/interest calculators, citation validation, template generation, case-alignment lookup), and enforces allowlist guardrails with telemetry and Supabase persistence. Case-quality scoring (PW/ST/SA/PI/JF/LB/RC/CQ axes) is computed per citation, stored in `case_scores`, and automatically triggers reviewer escalation when precedents are blocked or score below thresholds.【F:apps/api/src/agent.ts†L900-L1150】【F:apps/api/src/case-quality.ts†L1-L159】

**Remaining work**: Add FRIA gates, implement CEPEJ compliance checks, separate planner/executor/verifier stages with deterministic run keys and per-tool budgets, and consume real citator/risk data to replace placeholder scoring signals. Expose the “Why you can trust this” panel once the console ships.【F:docs/avocat_ai_bell_system_plan.md†L72-L208】

### 4. Retrieval & Evaluation
**What’s in place**: The vector-store synchroniser now embeds Supabase documents into `document_chunks`, `/search-local` returns pgvector matches, and an ops CLI (`pnpm ops:evaluate`) iterates seeded test cases, calls `/runs`, and records pass/fail telemetry with automated snippet checks. Fresh retrieval views (`org_retrieval_metrics`, `org_retrieval_origin_metrics`, `org_retrieval_host_metrics`) back the `/metrics/retrieval` endpoint, and the admin console renders the hybrid dashboard with allowlist precision, snippet mix, origin breakdown, and top host analytics.【F:apps/ops/src/vector-store.ts†L1-L129】【F:apps/api/src/server.ts†L451-L509】【F:apps/ops/src/evaluate.ts†L1-L190】【F:apps/ops/src/lib/evaluation.ts†L1-L40】【F:db/migrations/0067_retrieval_metrics_views.sql†L1-L66】【F:apps/web/src/components/admin/admin-view.tsx†L270-L453】

**Remaining work**: Broaden the evaluation corpus per jurisdiction and add recall/fidelity thresholds to CI gatekeeping so regressions surface alongside the new link-health checks.【F:docs/avocat_ai_bell_system_plan.md†L209-L260】【F:apps/ops/src/evaluate.ts†L192-L680】

### 5. Front-End & HITL Workflows
**What’s in place**: Only backend scaffolding; there is no Next.js application, design system, or operator/reviewer tooling yet.【F:README.md†L8-L24】

**Remaining work**: Implement the mandated mobile-first SaaS UI stack (Next.js App Router, Tailwind, shadcn/ui, TanStack Query), cross-cutting components (jurisdiction chips with OHADA/EU flags, plan drawer, IRAC accordion, citation badges, risk banners, language banners for Maghreb & Rwanda, case score explainers, C2PA export badges), analytics compliance banners, OHADA pre-emption notices, bilingual toggles, and the eight core screens. Enforce WCAG 2.2 AA, bilingual i18n, telemetry, CEPEJ “user control” affordances, and now deliver the PWA addendum: mobile reading modes, bottom navigation + FAB + command palette, article-level anchors, voice dictation, camera/OCR capture, Confidential Mode hardening, Workbox caching policies, Outbox/offline flows, staleness chips with refresh, push notifications, print/export polish, and Quick-Win backlog items for usability.【F:docs/avocat_ai_bell_system_plan.md†L261-L351】

### 6. Governance, Compliance & Operations
**What’s in place**: Governance documentation now covers CEPEJ charter mapping, EU AI Act FRIA template, Council of Europe AI alignment, residency & lawful basis matrix, the red-team playbook, and go-to-market pricing collateral. Red-team and performance CLI tooling persists evidence to `red_team_findings` and `performance_snapshots`, while the new SLO ledger (`slo_snapshots`) and regulator dispatch log (`regulator_dispatches`) back the `/metrics/slo` and `/reports/dispatches` endpoints alongside the `pnpm ops:slo` workflow.【F:docs/governance/cepej_charter_mapping.md†L1-L36】【F:docs/governance/fria_template.md†L1-L47】【F:docs/governance/coe_ai_alignment.md†L1-L31】【F:docs/governance/data_residency_matrix.md†L1-L21】【F:docs/operations/red_team_playbook.md†L1-L36】【F:docs/launch/pricing_collateral.md†L1-L28】【F:README.md†L108-L134】【F:apps/api/src/server.ts†L960-L1109】【F:apps/ops/src/slo-report.ts†L1-L141】

**Remaining work**: Daily regulator digests now publish automatically to `governance_publications`; outstanding scope centres on finalising SLO dashboards and propagating FRIA/CEPEJ notifications to external reports.【F:apps/edge/regulator-digest/index.ts†L1-L161】【F:supabase/config.toml†L1-L32】

### 7. Agent Learning & Continuous Improvement
**What’s in place**: Learning and telemetry tables now cover policy versioning, synonyms, job queues, and tool metrics; the agent inserts indexing/guardrail/query rewrite tickets when answers lack citations, rules, or routing confidence while recording per-tool latency in `tool_telemetry`; active policy versions and learned synonyms flow into hybrid retrieval; reviewer edits are persisted for diagnostics; and HITL fairness dashboards surface queue and bias metrics to operators.【F:db/migrations/0011_agent_learning.sql†L1-L94】【F:apps/api/src/agent.ts†L598-L855】【F:apps/api/src/server.ts†L2814-L3330】【F:apps/web/src/components/hitl/hitl-view.tsx†L1-L220】

**Remaining work**: Deepen analytics and visual storytelling around fairness metrics (e.g., trends, drill-downs) and continue expanding benchmark coverage per jurisdiction.【F:docs/avocat_ai_bell_system_plan.md†L274-L341】

## Phased Implementation Plan

### Phase 1 – Foundation Hardening & Compliance Gates ✅
- ✅ Automate Supabase environment conformance: secret rotation hooks, residency-aware storage/vector zoning, bucket prefix validation, and CI smoke tests for `public.is_org_member` enforcement.【F:apps/ops/src/rotate-secrets.ts†L1-L79】【F:db/migrations/0053_storage_residency_enforcement.sql†L1-L63】【F:apps/ops/src/rls-smoke.ts†L1-L45】
- ✅ Implement RBAC × ABAC middleware in the API, wiring `org_policies`, `jurisdiction_entitlements`, `consent_events`, and `audit_events` into request context and enforcement layers with MFA, consent, Council of Europe, and IP allow-list checks enforced per request.【F:apps/api/src/access-control.ts†L1-L255】【F:apps/api/src/server.ts†L1-L210】
- ✅ Ship enterprise identity flows: SSO/OIDC metadata storage, SCIM provisioning endpoints, MFA/passkey requirement toggles, IP allow-list enforcement, device/session registry, and Confidential Mode policy gating.【F:apps/api/src/sso.ts†L1-L372】【F:apps/api/src/scim.ts†L1-L305】
- ✅ Enforce France judge-analytics ban, EU AI Act FRIA checkpoints, CEPEJ principle guardrails, and Council of Europe treaty disclosures directly in the agent pipeline with audit logging and HITL escalation.【F:apps/api/src/agent.ts†L680-L770】【F:apps/api/src/compliance.ts†L1-L120】
- ✅ Extend Go / No-Go automation : les artefacts FRIA sont stockés dans `fria_artifacts`, synchronisés avec `go_no_go_evidence`, contrôlés via `pnpm ops:go-no-go --require-go` et la CI honore désormais la variable `GO_NO_GO_ENFORCE`.【F:.github/workflows/ci.yml†L68-L99】【F:apps/ops/src/go-no-go.ts†L1-L139】

### Phase 2 – Authoritative Ingestion & Retrieval Excellence
- ✅ Expand jurisdictional crawlers with ETag/hash diffing, Akoma Ntoso/ELI/ECLI enrichment, residency tagging, Rwanda/Maghreb live feeds, and quarantine workflows for non-allowlisted sources.【F:apps/edge/crawl-authorities/index.ts†L1-L1420】【F:db/migrations/0061_ingestion_quarantine.sql†L1-L18】
- ✅ Generate provenance dashboards and link-health alerts; expose chunk/article anchors, binding-language metadata, and residency zones to operators via `/metrics/governance` and corpus UI.【F:db/migrations/0057_org_provenance_metrics.sql†L1-L61】【F:apps/api/src/server.ts†L250-L309】
- ✅ Hybrid retrieval now combines OpenAI File Search results with `match_chunks`, exposes `/search-hybrid`, and logs per-run retrieval sets for auditability; remaining work tracks provenance dashboards and automated trust metrics.【F:apps/api/src/agent.ts†L536-L776】【F:apps/api/src/server.ts†L3298-L3360】
- ✅ Add retrieval recall dashboards, citation fidelity tracking, binding-language warning coverage, and automated link-health telemetry to the admin console and metrics views, and enforce acceptance thresholds in the evaluation CLI so CI fails when precision, temporal validity, or Maghreb banner coverage regress.【F:db/migrations/0067_retrieval_metrics_views.sql†L1-L66】【F:apps/api/src/server.ts†L451-L509】【F:apps/web/src/components/admin/admin-view.tsx†L270-L453】【F:apps/ops/src/evaluate.ts†L1-L640】
- ✅ Deliver the “Why you can trust this” panel by surfacing case scores, treatment graphs, statute alignment, allowlist signals, and verification notes in API responses and the research UI.【F:apps/api/src/case-quality.ts†L1-L215】【F:apps/web/src/components/research/research-view.tsx†L500-L626】

### Phase 3 – Learning Loop, Task Execution & HITL Operations
- ✅ Build hourly workers to process indexing/query-rewrite/guardrail tickets, snapshot queue health, and persist nightly drift/evaluation/fairness reports into `agent_learning_reports`, capturing LegalBench/LexGLUE metadata for downstream telemetry.【F:apps/edge/process-learning/index.ts†L1-L438】【F:apps/ops/src/evaluate.ts†L1-L340】
- ✅ Feed active policy versions and synonym expansions into the planner, persist reviewer edit payloads for diagnostics, and surface queue/drift/fairness dashboards inside the reviewer console to close the Phase 3 learning loop.【F:apps/api/src/agent.ts†L598-L855】【F:db/migrations/0068_hitl_reviewer_edits.sql†L1-L24】【F:apps/api/src/server.ts†L2814-L3330】【F:apps/web/src/components/hitl/hitl-view.tsx†L1-L220】
- ✅ HITL actions now capture reviewer response times, bucket SLA metrics, audit the outcomes, and enqueue dedicated `review_feedback_ticket` learning jobs that the hourly worker routes into the task queue for follow-up.【F:db/migrations/0059_hitl_resolution_metrics.sql†L1-L7】【F:apps/api/src/server.ts†L2620-L2744】【F:apps/edge/process-learning/index.ts†L142-L211】
- ✅ Split planner/executor/verifier pipeline with deterministic run keys, persistent verification status, and structured HITL escalation when IRAC outputs are incomplete.【F:apps/api/src/agent.ts†L3294-L3361】【F:apps/api/src/agent.ts†L2094-L2131】【F:db/migrations/0060_agent_run_verification.sql†L1-L4】
- ✅ Activate Confidential Mode propagation end-to-end so web search and hosted telemetry are disabled, hybrid retrieval caches are skipped, and residency/OHADA notices surface in the run payload.【F:apps/api/src/agent.ts†L343-L401】【F:apps/api/src/agent.ts†L2442-L2512】【F:apps/api/test/agent.test.ts†L580-L653】
- ✅ Implement reviewer console APIs: listing, detail view (`GET /hitl/:id`), action endpoint, learning feedback tickets, and new `/reports/learning` plus `/governance/publications` feeds alongside the regulator digest CLI (`pnpm ops:regulator-digest`).【F:apps/api/src/server.ts†L2722-L2887】【F:apps/api/src/server.ts†L1883-L1950】【F:apps/ops/src/regulator-digest.ts†L1-L126】
- ✅ Publish DPIA commitments/Council of Europe engagements via `governance_publications` (seeded slugs) and expose them publicly alongside existing SLO dashboards.【F:db/migrations/0063_governance_publications.sql†L1-L12】【F:docs/governance/dpia_commitments.md†L1-L24】【F:apps/api/src/server.ts†L320-L358】
- ✅ Deliver reviewer-console metrics via `GET /hitl/metrics`, combining queue, drift, and fairness snapshots for operators alongside nightly learning reports.【F:apps/api/src/server.ts†L2814-L2892】【F:apps/api/test/server.routes.test.ts†L49-L175】
- ✅ Automate regulator digest generation with the scheduled edge function so weekly publications land in `governance_publications` for each tenant.【F:apps/edge/regulator-digest/index.ts†L1-L161】【F:supabase/config.toml†L1-L32】

### Phase 4 – Operator Console, Mobile PWA & Launch Readiness
- Implement the full Next.js App Router UI with AppShell, jurisdiction router, plan drawer, IRAC accordion, citation badges, risk banners, Maghreb/Rwanda language banners, case score explainers, and bilingual strings per Appendix A.【F:docs/avocat_ai_bell_system_plan.md†L261-L327】
- Deliver drafting, matters, citations browser (diff viewer), HITL review, corpus & sources, admin screens, and Workspace dashboard with telemetry instrumentation and role-based visibility.【F:docs/avocat_ai_bell_system_plan.md†L261-L305】
- Achieve mobile-first PWA excellence: bottom navigation + FAB, command palette, reading modes, article-level anchors, voice dictation, camera OCR, Outbox/offline queue, staleness chips, push digests, Core Web Vitals budgets, and print/export polish.【F:docs/avocat_ai_bell_system_plan.md†L331-L351】
- Integrate C2PA signing for exports, confidential-mode UI controls, bilingual toggles, Rwanda triage, and CEPEJ “user control” affordances (HITL CTA, reveal sources, human review request).【F:docs/avocat_ai_bell_system_plan.md†L267-L351】
- Finalise launch: pilot onboarding playbook activation, customer training collateral, marketing site updates, pricing collateral publication, and post-launch KPI/alert dashboards.【F:docs/avocat_ai_bell_system_plan.md†L342-L377】【F:docs/launch/pricing_collateral.md†L1-L28】
